# comand ?? install command || install command
# @@ means default installer, such as apt, yum, etc.

function special_install_brew() {
    export HOMEBREW_INSTALL_FROM_API=1
    export HOMEBREW_API_DOMAIN="https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/api"
    export HOMEBREW_BOTTLE_DOMAIN="https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles"
    export HOMEBREW_BREW_GIT_REMOTE="https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git"
    export HOMEBREW_CORE_GIT_REMOTE="https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git"
    NONINTERACTIVE=1 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    test -d ~/.linuxbrew && eval "$(~/.linuxbrew/bin/brew shellenv)"
    test -d /home/linuxbrew/.linuxbrew && eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
    eval "$(brew --prefix)/bin/brew shellenv"
    brew update
}

[required]
curl ?? @@ install curl
git ?? @@ install git
cargo ?? @@ install cargo
brew ?? special_install_brew

[basic]
preload ?? @@ install preload
vim ?? @@ install vim
autossh ?? @@ install autossh
exa ?? @@ install exa || brew install exa || cargo install exa --locked
bat||batcat ?? @@ install bat || brew install bat || cargo install bat --locked
fd||fdfind ?? @@ install fd || @@ install fd-find || brew install fd || cargo install fd-find --locked
rg ?? @@ install ripgrep || brew install ripgrep
zoxide ?? brew install zoxide
thefuck ?? brew install thefuck
tldr ?? brew install tlrc
ranger ?? brew install ranger
gitui ?? brew install gitui

[optional]
meld ?? @@ install meld
